---
import { getCollection, type CollectionEntry } from 'astro:content';
import ServiceLayout from '../../layouts/ServiceLayout.astro';
import { defaultLocale, type Locale } from '../../i18n';

export async function getStaticPaths() {
  const services = await getCollection('services', ({ data }) => data.lang === defaultLocale);
  
  return services.map((service) => ({
    params: { slug: service.data.serviceSlug },
    props: { service },
  }));
}

interface Props {
  service: CollectionEntry<'services'>;
}

const { service } = Astro.props;
const { data } = service;

const heroImage = data.hero ? {
  image: data.hero.image,
  alt: data.hero.alt,
} : undefined;
---

<ServiceLayout
  title={data.title}
  description={data.description}
  lang={data.lang as Locale}
  hero={heroImage}
  lead={data.lead}
  sections={data.sections}
  benefitsTitle={data.benefitsTitle}
  benefits={data.benefits}
  aside={data.aside}
  cta={data.cta}
/>