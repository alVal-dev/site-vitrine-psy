---
import { type Locale, t } from "../../i18n";

interface Props {
  lang: Locale;
}

const { lang } = Astro.props;

const year = new Date().getFullYear();

const city = "Libourne, France";
const phoneLabel = "+33 07 XX XX XX XX";
const phoneHref = "+337XXXXXXXX";
const email = "contact@evelinvalcarce.fr";

const rpps = "10009480426";
const siret = "XXX XXX XXX XXXXX";

const socials = [
  { label: "LinkedIn", href: "https://www.linkedin.com/", icon: "linkedin" },
  { label: "Facebook", href: "https://www.facebook.com/", icon: "facebook" },
] as const;

const legalHref = lang === 'fr' ? '/mentions-legales' : '/es/menciones-legales';
const legalLabel = lang === 'fr' ? 'Mentions légales' : 'Menciones legales';
---

<footer id="contact" aria-labelledby="footer-title" class="bg-gray-50 border-t border-gray-100 py-16">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="mb-12 grid gap-12 md:grid-cols-3">
      
      <!-- Contact -->
      <section aria-labelledby="footer-title">
        <h2 id="footer-title" class="mb-6 font-serif text-2xl text-gray-800 flex items-center gap-2">
          <span class="inline-block h-2 w-2 rounded-full bg-rose-400" aria-hidden="true"></span>
          {t('footer.contact', lang)}
        </h2>
        <address class="not-italic">
          <ul class="space-y-4" role="list">
            <li class="flex items-start gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="mt-1 h-5 w-5 shrink-0 text-rose-400">
                <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <span class="text-gray-600">{city}</span>
            </li>
            <li class="flex items-start gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="mt-1 h-5 w-5 shrink-0 text-rose-400">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
              <a 
                href={`tel:${phoneHref}`} 
                class="text-gray-600 transition-colors hover:text-rose-500 focus-visible:outline-none focus-visible:text-rose-500"
              >
                {phoneLabel}
              </a>
            </li>
            <li class="flex items-start gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="mt-1 h-5 w-5 shrink-0 text-rose-400">
                <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
              </svg>
              <a 
                href={`mailto:${email}`} 
                class="text-gray-600 transition-colors hover:text-rose-500 focus-visible:outline-none focus-visible:text-rose-500"
              >
                {email}
              </a>
            </li>
          </ul>
        </address>
      </section>

      <!-- Infos pratiques -->
      <section aria-labelledby="footer-practical-title">
        <h3 id="footer-practical-title" class="mb-6 font-serif text-2xl text-gray-800 flex items-center gap-2">
          <span class="inline-block h-2 w-2 rounded-full bg-rose-400" aria-hidden="true"></span>
          {t('footer.practicalInfo', lang)}
        </h3>
        <p class="mb-4 leading-relaxed text-gray-600">
          {t('footer.practicalText', lang)}
        </p>
        <p class="text-sm leading-relaxed text-gray-500">
          {t('footer.practicalNote', lang)}
        </p>
      </section>

      <!-- Réseaux sociaux -->
      <nav aria-labelledby="footer-social-title">
        <h3 id="footer-social-title" class="mb-6 font-serif text-2xl text-gray-800 flex items-center gap-2">
          <span class="inline-block h-2 w-2 rounded-full bg-rose-400" aria-hidden="true"></span>
          {t('footer.followMe', lang)}
        </h3>
        <ul class="flex flex-wrap gap-3" role="list">
          {socials.map((s) => (
            <li>
              <a 
                href={s.href} 
                target="_blank" 
                rel="noopener noreferrer" 
                aria-label={s.label}
                class="flex h-11 w-11 items-center justify-center rounded-full border border-gray-200 text-gray-400 transition-all hover:border-rose-300 
                    hover:bg-rose-50 hover:text-rose-500 hover:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rose-400 
                    focus-visible:ring-offset-2"
              >
                {s.icon === "linkedin" && (
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="h-5 w-5">
                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                    <rect width="4" height="12" x="2" y="9"></rect>
                    <circle cx="4" cy="4" r="2"></circle>
                  </svg>
                )}
                {s.icon === "facebook" && (
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="h-5 w-5">
                    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                  </svg>
                )}
              </a>
            </li>
          ))}
        </ul>
      </nav>
    </div>

    <!-- Bottom bar -->
    <div class="border-t border-gray-100 pt-8">
      <div class="flex flex-col items-start justify-between gap-4 md:flex-row md:items-center">
        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-4 text-sm text-gray-500">
          <p>© {year} Evelin Valcarce — {t('footer.copyright', lang)}</p>
          <span class="hidden sm:inline text-gray-300" aria-hidden="true">|</span>
          <a 
            href={legalHref} 
            class="text-gray-500 transition-colors hover:text-rose-500 focus-visible:outline-none focus-visible:text-rose-500"
          >
            {legalLabel}
          </a>
        </div>
        <dl class="flex flex-col gap-2 sm:flex-row sm:gap-6 text-sm text-gray-400">
          <div class="flex gap-2">
            <dt class="sr-only">{t('footer.rppsLabel', lang)}</dt>
            <dd>{t('footer.rppsLabel', lang)} : {rpps}</dd>
          </div>
          <div class="flex gap-2">
            <dt class="sr-only">{t('footer.siretLabel', lang)}</dt>
            <dd>{t('footer.siretLabel', lang)} : {siret}</dd>
          </div>
        </dl>
      </div>
    </div>
  </div>
</footer>